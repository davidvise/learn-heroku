<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Use the Fetch API to submit a form</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="robots" content="noindex, nofollow">
    <meta name="googlebot" content="noindex, nofollow">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script type="text/javascript" src="/js/lib/dummy.js"></script>

    <link rel="stylesheet" type="text/css" href="/css/result-light.css">

    <script type="text/javascript" src="https://cdn.polyfill.io/v1/polyfill.min.js?features=fetch,Promise&amp;gated=1"></script>

    <style id="compiled-css" type="text/css">
        body {
            padding: 10px;
            font-family: sans-serif;
            font-size: 18px;
            color: #fff;
            background-color: #262E3D;
        }
    </style>

    <!-- TODO: Missing CoffeeScript 2 -->

    <script type="text/javascript">
        //<![CDATA[
       
                
                function querywo() {
                    // 1. Setup the request
                    // ================================
                    // 1.1 Headers
                    var headers = new Headers();
                    // Tell the server we want JSON back
                    headers.set('Accept', 'application/json');
                    headers.set('Access-Control-Allow-Origin', '*');

                    headers.set('Access-Control-Allow-Credentials', true);
                    headers.set('Access-Control-Allow-Methods', 'GET');
                    headers.set('Access-Control-Allow-Headers', 'application/json');
                   
                    var won = document.getElementById('something').value;
                
                    // 2. Make the request
                    // ================================
                    var url = 'http://unitifm-maintenance.au-s1.cloudhub.io/api/query/CHUBB-FMC/' + won;
                    var fetchOptions = {
                        method: 'GET',
                        mode: 'cors',
                        headers
                        //body: formData
                    };

                    var responsePromise = fetch(url, fetchOptions);

                    // 3. Use the response
                    // ================================
                    responsePromise
                    // 3.1 Convert the response into JSON-JS object.
                        .then(function(response) {
                            return response.json();
                        })
                        // 3.2 Do something with the JSON data
                        .then(function(jsonData) {
                            console.log(jsonData);
                            document.getElementById('results').innerText = 'Status: ' + jsonData.workorder.status;
                            document.getElementById('message').innerText = jsonData.workorder.result;
                            //      	JSON.stringify(jsonData);
                        });

                    event.preventDefault();
                };
          
        
        function delaywo() {
                    // 1. Setup the request
                    // ================================
                    // 1.1 Headers
                    var headers = new Headers();
                    // Tell the server we want JSON back
                    headers.set('Accept', 'application/json');
                    headers.set('Content-Type','application/json; charset=UTF-8');
                    
                    headers.set('Access-Control-Allow-Origin', '*');
                    headers.set('Access-Control-Allow-Credentials', true);
                    headers.set('Access-Control-Allow-Methods', 'PUT');
                    headers.set('Access-Control-Allow-Headers', 'application/json');

                    // 1.2 Form Data
                    // We need to properly format the submitted fields.
                    // Here we will use the same format the browser submits POST forms.
                    // You could use a different format, depending on your server, such
                    // as JSON or XML.
                    
                    // This is for the purpose of this demo using jsFiddle AJAX Request endpoint
                    
                    var won = document.getElementById('something').value;
                    var delayreq = "{\"workorder\": {\"laborhours\": \"1.25\",\"workorderid\": \"2361105\",\"site-id\": \"SKSA\",\"materialcost\": \"100.00\",\"laborcost\": \"100.00\",\"service cost\": \"100.00\"}}"

                    // 2. Make the request
                    // ================================
                    var url = 'http://unitifm-maintenance.au-s1.cloudhub.io/api/update/CHUBB-FMC/' + won + '?status=WSCH';
                    var fetchOptions = {
                        method: 'PUT',
                        mode: 'cors',
                        headers,
                        body: delayreq
                    };

                    var responsePromise = fetch(url, fetchOptions);

                    // 3. Use the response
                    // ================================
                    responsePromise
                    // 3.1 Convert the response into JSON-JS object.
                        .then(function(response) {
                            return response.json();
                        })
                        // 3.2 Do something with the JSON data
                        .then(function(jsonData) {
                            console.log(jsonData);
                            document.getElementById('message').innerText = jsonData.result;
                            //      	JSON.stringify(jsonData);
                        });

                    event.preventDefault();
                };
        
               
        function completewo() {
                    // 1. Setup the request
                    // ================================
                    // 1.1 Headers
                    var headers = new Headers();
                    // Tell the server we want JSON back
                    headers.set('Accept', 'application/json');
                    headers.set('Content-Type','application/json; charset=UTF-8');
                    
                    headers.set('Access-Control-Allow-Origin', '*');
                    headers.set('Access-Control-Allow-Credentials', true);
                    headers.set('Access-Control-Allow-Methods', 'PUT');
                    headers.set('Access-Control-Allow-Headers', 'application/json');

                    // 1.2 Form Data
                    // We need to properly format the submitted fields.
                    // Here we will use the same format the browser submits POST forms.
                    // You could use a different format, depending on your server, such
                    // as JSON or XML.
                    
                    // This is for the purpose of this demo using jsFiddle AJAX Request endpoint
                    
                    var won = document.getElementById('something').value;
                    var delayreq = "{\"workorder\": {\"laborhours\": \"1.25\",\"workorderid\": \"2361105\",\"site-id\": \"SKSA\",\"materialcost\": \"100.00\",\"laborcost\": \"100.00\",\"service cost\": \"100.00\"}}"

                    // 2. Make the request
                    // ================================
                    var url = 'http://unitifm-maintenance.au-s1.cloudhub.io/api/update/CHUBB-FMC/' + won + '?status=COMP';
                    var fetchOptions = {
                        method: 'PUT',
                        mode: 'cors',
                        headers,
                        body: delayreq
                    };

                    var responsePromise = fetch(url, fetchOptions);

                    // 3. Use the response
                    // ================================
                    responsePromise
                    // 3.1 Convert the response into JSON-JS object.
                        .then(function(response) {
                            return response.json();
                        })
                        // 3.2 Do something with the JSON data
                        .then(function(jsonData) {
                            console.log(jsonData);
                              document.getElementById('message').innerText = jsonData.result;
                            //      	JSON.stringify(jsonData);
                        });

                    event.preventDefault();
                };
        
                     
        function inprogresswo() {
                    // 1. Setup the request
                    // ================================
                    // 1.1 Headers
                    var headers = new Headers();
                    // Tell the server we want JSON back
                    headers.set('Accept', 'application/json');
                    headers.set('Content-Type','application/json; charset=UTF-8');
                    
                    headers.set('Access-Control-Allow-Origin', '*');
                    headers.set('Access-Control-Allow-Credentials', true);
                    headers.set('Access-Control-Allow-Methods', 'PUT');
                    headers.set('Access-Control-Allow-Headers', 'application/json');

                    // 1.2 Form Data
                    // We need to properly format the submitted fields.
                    // Here we will use the same format the browser submits POST forms.
                    // You could use a different format, depending on your server, such
                    // as JSON or XML.
                    
                    // This is for the purpose of this demo using jsFiddle AJAX Request endpoint
                    
                    var won = document.getElementById('something').value;
                    var delayreq = "{\"workorder\": {\"laborhours\": \"1.25\",\"workorderid\": \"2361105\",\"site-id\": \"SKSA\",\"materialcost\": \"100.00\",\"laborcost\": \"100.00\",\"service cost\": \"100.00\"}}"

                    // 2. Make the request
                    // ================================
                    var url = 'http://unitifm-maintenance.au-s1.cloudhub.io/api/update/CHUBB-FMC/' + won + '?status=INPRG';
                    var fetchOptions = {
                        method: 'PUT',
                        mode: 'cors',
                        headers,
                        body: delayreq
                    };

                    var responsePromise = fetch(url, fetchOptions);

                    // 3. Use the response
                    // ================================
                    responsePromise
                    // 3.1 Convert the response into JSON-JS object.
                        .then(function(response) {
                            return response.json();
                        })
                        // 3.2 Do something with the JSON data
                        .then(function(jsonData) {
                            console.log(jsonData);
                             document.getElementById('message').innerText = jsonData.result;
                           //      	JSON.stringify(jsonData);
                        });

                    event.preventDefault();
                };
        
                function wpcondwo() {
                    // 1. Setup the request
                    // ================================
                    // 1.1 Headers
                    var headers = new Headers();
                    // Tell the server we want JSON back
                    headers.set('Accept', 'application/json');
                    headers.set('Content-Type','application/json; charset=UTF-8');
                    
                    headers.set('Access-Control-Allow-Origin', '*');
                    headers.set('Access-Control-Allow-Credentials', true);
                    headers.set('Access-Control-Allow-Methods', 'PUT');
                    headers.set('Access-Control-Allow-Headers', 'application/json');

                    // 1.2 Form Data
                    // We need to properly format the submitted fields.
                    // Here we will use the same format the browser submits POST forms.
                    // You could use a different format, depending on your server, such
                    // as JSON or XML.
                    
                    // This is for the purpose of this demo using jsFiddle AJAX Request endpoint
                    
                    var won = document.getElementById('something').value;
                    var delayreq = "{\"workorder\": {\"laborhours\": \"1.25\",\"workorderid\": \"2361105\",\"site-id\": \"SKSA\",\"materialcost\": \"100.00\",\"laborcost\": \"100.00\",\"service cost\": \"100.00\"}}"

                    // 2. Make the request
                    // ================================
                    var url = 'http://unitifm-maintenance.au-s1.cloudhub.io/api/update/CHUBB-FMC/' + won + '?status=WPCOND';
                    var fetchOptions = {
                        method: 'PUT',
                        mode: 'cors',
                        headers,
                        body: delayreq
                    };

                    var responsePromise = fetch(url, fetchOptions);

                    // 3. Use the response
                    // ================================
                    responsePromise
                    // 3.1 Convert the response into JSON-JS object.
                        .then(function(response) {
                            return response.json();
                        })
                        // 3.2 Do something with the JSON data
                        .then(function(jsonData) {
                            console.log(jsonData);
                            document.getElementById('message').innerText = jsonData.result;
                            //      	JSON.stringify(jsonData);
                        });

                    event.preventDefault();
                };
        
                      function waitwo() {
                    // 1. Setup the request
                    // ================================
                    // 1.1 Headers
                    var headers = new Headers();
                    // Tell the server we want JSON back
                    headers.set('Accept', 'application/json');
                    headers.set('Content-Type','application/json; charset=UTF-8');
                    
                    headers.set('Access-Control-Allow-Origin', '*');
                    headers.set('Access-Control-Allow-Credentials', true);
                    headers.set('Access-Control-Allow-Methods', 'PUT');
                    headers.set('Access-Control-Allow-Headers', 'application/json');

                    // 1.2 Form Data
                    // We need to properly format the submitted fields.
                    // Here we will use the same format the browser submits POST forms.
                    // You could use a different format, depending on your server, such
                    // as JSON or XML.
                    
                    // This is for the purpose of this demo using jsFiddle AJAX Request endpoint
                    
                    var won = document.getElementById('something').value;
                    var delayreq = "{\"workorder\": {\"laborhours\": \"1.25\",\"workorderid\": \"2361105\",\"site-id\": \"SKSA\",\"materialcost\": \"100.00\",\"laborcost\": \"100.00\",\"service cost\": \"100.00\"}}"

                    // 2. Make the request
                    // ================================
                    var url = 'http://unitifm-maintenance.au-s1.cloudhub.io/api/update/CHUBB-FMC/' + won + '?status=WMATL';
                    var fetchOptions = {
                        method: 'PUT',
                        mode: 'cors',
                        headers,
                        body: delayreq
                    };

                    var responsePromise = fetch(url, fetchOptions);

                    // 3. Use the response
                    // ================================
                    responsePromise
                    // 3.1 Convert the response into JSON-JS object.
                        .then(function(response) {
                            return response.json();
                        })
                        // 3.2 Do something with the JSON data
                        .then(function(jsonData) {
                            console.log(jsonData);
                            document.getElementById('message').innerText = jsonData.result;
                            //      	JSON.stringify(jsonData);
                        });

                    event.preventDefault();
                };
    
                            function apprwo() {
                    // 1. Setup the request
                    // ================================
                    // 1.1 Headers
                    var headers = new Headers();
                    // Tell the server we want JSON back
                    headers.set('Accept', 'application/json');
                    headers.set('Content-Type','application/json; charset=UTF-8');
                    
                    headers.set('Access-Control-Allow-Origin', '*');
                    headers.set('Access-Control-Allow-Credentials', true);
                    headers.set('Access-Control-Allow-Methods', 'PUT');
                    headers.set('Access-Control-Allow-Headers', 'application/json');

                    // 1.2 Form Data
                    // We need to properly format the submitted fields.
                    // Here we will use the same format the browser submits POST forms.
                    // You could use a different format, depending on your server, such
                    // as JSON or XML.
                    
                    // This is for the purpose of this demo using jsFiddle AJAX Request endpoint
                    
                    var won = document.getElementById('something').value;
                    var delayreq = "{\"workorder\": {\"laborhours\": \"1.25\",\"workorderid\": \"2361105\",\"site-id\": \"SKSA\",\"materialcost\": \"100.00\",\"laborcost\": \"100.00\",\"service cost\": \"100.00\"}}"

                    // 2. Make the request
                    // ================================
                    var url = 'http://unitifm-maintenance.au-s1.cloudhub.io/api/update/CHUBB-FMC/' + won + '?status=WMATL';
                    var fetchOptions = {
                        method: 'PUT',
                        mode: 'cors',
                        headers,
                        body: delayreq
                    };

                    var responsePromise = fetch(url, fetchOptions);

                    // 3. Use the response
                    // ================================
                    responsePromise
                    // 3.1 Convert the response into JSON-JS object.
                        .then(function(response) {
                            return response.json();
                        })
                        // 3.2 Do something with the JSON data
                        .then(function(jsonData) {
                            console.log(jsonData);
                            document.getElementById('message').innerText = jsonData.result;
                            //      	JSON.stringify(jsonData);
                        });

                    event.preventDefault();
                };
    
        
   
            //]]>
    </script>

</head>

<form id="form" action="" method="GET">
    <p><img src="https://images.ctfassets.net/v228i5y5k0x4/4oLOVw1iLCaOsuGeGCggQw/ef0f9861634d4d94f9a9be51b812fdd0/sydair-logo.png" alt="" width="284" height="64" /></p>
    <p>Work Order Number:
        <input id="something" name="something" type="text" />
    </p>
    <p><strong><button style="height: 25px; width: 80px;" type="submit" onClick="querywo()">Query</button></strong>
        <button style="height: 25px; width: 80px;" type="submit" onClick="delaywo()">WSCH</button>
        <button style="height: 25px; width: 80px;" type="submit" onClick="waitwo()">WMATL</button>
        <button style="height: 25px; width: 80px;" type="submit" onClick="completewo()">COMP</button>
        <button style="height: 25px; width: 80px;" type="submit" onClick="wpcondwo()">WPCOND</button>
        <button style="height: 25px; width: 80px;" type="submit" onClick="inprogresswo()">INPRG</button>
        <button style="height: 25px; width: 80px;" type="submit" onClick="apprwo()">APPR</button>
    </p>
</form>
<h1 id="results"><span style="color: #00ccff;"><strong></strong></span></h1>
<h2 id="message"><span style="color: #00ccff;"></span></h2>

<script>
    // tell the embed parent frame the height of the content
    if (window.parent && window.parent.parent) {
        window.parent.parent.postMessage(["resultsFrame", {
            height: document.body.getBoundingClientRect().height,
            slug: "rxeuaatw"
        }], "*")
    }
    // always overwrite window.name, in case users try to set it manually
    window.name = "result"
</script>
</body>

</html>
